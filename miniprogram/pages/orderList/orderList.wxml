<!--pages/orderList/orderList.wxml-->
<view class="container">
  <!-- æ ‡é¢˜æ  -->
  <view class="header">
    <text class="title">è®¢å•åˆ—è¡¨</text>
    <text class="subtitle">æ‰€æœ‰è®¢å•ä»æ–°åˆ°æ—§æ’åˆ—</text>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <scroll-view class="order-list" scroll-y wx:if="{{orders.length > 0}}">
    <view 
      class="order-item" 
      wx:for="{{orders}}" 
      wx:key="_id"
      bindtap="viewOrderDetail"
      data-id="{{item._id}}"
    >
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <view class="order-info">
          <text class="guest-name">{{item.guestName || 'åŒ¿åå®¢äºº'}}</text>
          <text class="visit-date">{{item.visitDate}} {{item.visitTime}}</text>
        </view>
      </view>

      <!-- èœå“æ ‡ç­¾ -->
      <view class="order-dishes">
        <text class="dish-tag" wx:for="{{item.dishes}}" wx:for-item="dish" wx:key="dishId">
          {{dish.dishName}} Ã—{{dish.quantity}}
        </text>
      </view>

      <!-- è®¢å•åº•éƒ¨ -->
      <view class="order-footer">
        <text class="total-count">å…± {{item.dishes.length}} é“èœ</text>
        <view class="order-actions" catchtap="stopPropagation">
          <button 
            class="action-btn delete" 
            bindtap="deleteOrder" 
            data-id="{{item._id}}"
            data-index="{{index}}"
          >
            åˆ é™¤
          </button>
        </view>
      </view>

      <!-- ç‰¹æ®Šè¦æ±‚ -->
      <view class="special-requests" wx:if="{{item.specialRequests}}">
        <text class="label">å¤‡æ³¨ï¼š</text>{{item.specialRequests}}
      </view>
    </view>
  </scroll-view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:else>
    <view class="empty-icon">ğŸ“</view>
    <text class="empty-text">æš‚æ— è®¢å•</text>
  </view>
</view>
